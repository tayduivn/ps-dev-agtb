<soda>
	<!-- Related task can be closed from contact detail view. -->
	<puts text="Test: Contacts_1588.xml starting." />

	<timestamp />
	<!--Create contact record-->
	<script file="{@global.scriptsdir}/modules/lib/Contact_Create_Lib.xml" />

	<!--Search the Contact record-->
	<link id="moduleTab_Contacts" />
	<div class="moduleTitle">
		<link href="index.php?module=Contacts&amp;action=index" click="false" />
	</div>
	<link text="Basic Search" required="false" />
	<button id="search_form_clear" />
	<textfield id="search_name_basic" set="{@pre_contact_first_name}" />
	<button id="search_form_submit" />
	<table class="list view">
		<link text="{@pre_contact_first_name} {@pre_contact_last_name}" />
	</table>

	<browser assert="{@pre_contact_first_name} {@pre_contact_last_name}" />
	<button name="Activities_createtask_button" />
	<!--goto task subpanel & click "Create"-->
	<csv file="{@global.scriptsdir}/csvs/contacts/Contacts_1471.csv" var="contact_record_1588">
		<textfield id="name" set="{@contact_record_1588.name} {@user.name} {@stamp}" />
		<select id="priority" set="{@contact_record_1588.priority}" />
		<select id="status" set="{@contact_record_1588.status}" />
		<textfield id="description" set="{@contact_record_1588.description}" />

		<!--Due Date-->
		<textfield id="date_due_date" set="{@contact_record_1588.date_due_date}" />
		<select id="date_due_hours" set="{@contact_record_1588.date_due_hours}" />
		<select id="date_due_minutes" set="{@contact_record_1588.date_due_minutes}" />
		<checkbox id="date_due_flag" set="{@contact_record_1588.date_due_flag}" />

		<!--Start Date-->
		<textfield id="date_start_date" set="{@contact_record_1588.date_start_date}" />
		<select id="date_start_hours" set="{@contact_record_1588.date_start_hours}" />
		<select id="date_start_minutes" set="{@contact_record_1588.date_start_minutes}" />
		<checkbox id="date_start_flag" set="{@contact_record_1588.date_start_flag}" />

		<button value="Save" />

		<wait />

		<!--Verify the task record created in subpanel-->
		<div id="list_subpanel_activities">
			<table class="list view">
				<link text="{@contact_record_1588.name} {@user.name} {@stamp}" click="false" />
			</table>
		</div>
	</csv>

	<!--Save the subpanel task id & name-->
	<form name="DetailView">
		<hidden name="record" var="pre_task_subpanel_id" />
	</form>
	<var var="pre_task_subpanel_name" set="{@contact_record_1588.name} {@user.name} {@stamp}" />

	<!--Search the Contact record-->
	<link id="moduleTab_Contacts" />
	<div class="moduleTitle">
		<link href="index.php?module=Contacts&amp;action=index" click="false" />
	</div>
	<button id="search_form_clear" />
	<textfield id="search_name_basic" set="{@pre_contact_first_name}" />
	<button id="search_form_submit" />
	<table class="list view">
		<link text="{@pre_contact_first_name} {@pre_contact_last_name}" />
	</table>

	<wait timeout="2" />
	<!--click "close image"-->
	<div id="list_subpanel_activities">
		<table class="list view">
			<link text="{@pre_task_subpanel_name}" click="false" />
			<row class="oddListRowS1">
				<image index="2" click="true" />
			</row>
		</table>
	</div>
	<wait timeout="10" />
	<div id="closeActivityDialog">
		<button text="OK" />
	</div>
	<wait timeout="45" />
	<div id="list_subpanel_activities">
		<span class="pageNumbers" assert="(0 - 0 of 0)" />
	</div>

	<link id="moduleTab_Contacts" />
	<div class="moduleTitle">
		<link href="index.php?module=Contacts&amp;action=index" click="false" />
	</div>
	<button id="search_form_clear" />
	<textfield id="search_name_basic" set="{@pre_contact_first_name}" />
	<button id="search_form_submit" />
	<table class="list view">
		<link text="{@pre_contact_first_name} {@pre_contact_last_name}" />
	</table>

	<wait timeout="2" />

	<div id="list_subpanel_history">
		<span class="pageNumbers" assert="(1 - 1 of 1)" />
	</div>

	<!--Remove records-->
	<script file="{@global.scriptsdir}/modules/lib/Contact_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Task_Delete_Lib.xml" />

	<puts text="Test: Contacts_1588.xml finished." />
</soda>
