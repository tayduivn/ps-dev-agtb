<soda>
	<puts text="Test: Opportunity_2347.xml starting." />

	<csv file="{@global.scriptsdir}/csvs/opportunity/Opportunity_2347.csv" var="Opportunity_2347">

		<script file="{@global.scriptsdir}/modules/lib/Contact_Delete_Lib.xml" />
		<!--script file="scripts/sugarcrm/modules/lib/Team_Create_Lib.xml"/ -->
		<script file="{@global.scriptsdir}/modules/lib/Opp_Create_Lib.xml" />
		<link id="moduleTab_Opportunities" />

		<link text="Basic Search" required="false" />

		<button id="search_form_clear" />

		<form id="search_form">
			<textfield id="name_basic" set="{@Opportunity_2347.name} {@user.name} {@stamp}" />
		</form>

		<button id="search_form_submit" />

		<table class="list view">
			<browser assert="{@Opportunity_2347.name} {@user.name} {@stamp}" />
			<link text="{@Opportunity_2347.name} {@user.name} {@stamp}" click="true" />
		</table>
		<table id="detailpanel_1">

			<browser assert="{@Opportunity_2347.name} {@user.name} {@stamp}" />
		</table>
		<div id="list_subpanel_contacts">
			<table class="list view">
				<button id="opportunities_contacts_create_button" />
			</table>
		</div>
		<wait timeout="10" />
		<!--Account select -->
		<button id="btn_account_name" />
		<browser assert="Account Search" />
		<textfield name="name_advanced" set="{@pre_account_name}" />
		<button value="Search" />
		<table class="list view">
			<link text="{@pre_account_name}" />
		</table>

		<!--teams select -->
		<wait timeout="10" />
		<button name="teamSelect" />

		<browser assert="Team Search" />
		<textfield name="name" set="{@Opportunity_2347.team_name}" />
		<button value="Search" />
		<link text="{@Opportunity_2347.team_name}" />


		<!--goto contact edit view -->
		<textfield name="first_name" set="{@Opportunity_2347.contact_first_name}" />
		<textfield id="last_name" set="{@Opportunity_2347.contact_last_name}" />


		<textfield id="phone_work" set="{@Opportunity_2347.contact_phone_work}" />
		<textfield id="phone_mobile" set="{@Opportunity_2347.contact_phone_mobile}" />
		<textfield id="phone_fax" set="{@Opportunity_2347.contact_phone_fax}" />
		<textfield id="Contacts0emailAddress0" set="{@Opportunity_2347.contact_emailAddress0}" />
		<select id="lead_source" set="{@Opportunity_2347.contact_lead_source}" />
		<checkbox id="do_not_call" set="{@Opportunity_2347.contact_do_not_call}" />

		<button value="Save" />
		<wait timeout="10" />

		<browser
			assert="{@Opportunity_2347.contact_first_name} {@Opportunity_2347.contact_last_name}" />


		<hidden name="record" var="pre_opp_id" />

		<var var="pre_opp_name" set="{@Opportunity_2347.name} {@user.name} {@stamp}" />

	</csv>
	<!--Run Delete XML -->
	<script file="{@global.scriptsdir}/modules/lib/Opp_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Account_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Contact_Delete_Lib.xml" />

	<puts text="Test: Opportunity_2347.xml finished." />
</soda>
