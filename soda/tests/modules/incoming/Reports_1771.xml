<soda>
	<puts text="Test: Reports_1771.xml starting." />
	<!--
		1. Login to SugarCRM as a valid user who creates the report mentioned 
			in precondition 1, such as "user1".
		2. Go to Home module. /* Franklin 01/20/2011: changed Dashboard to Home 
			for 6.1.2 release */

		4. Click "Add Sugar Dashlets" link.
		5. Expand "My Team Reports" in pop-up window.
	-->

	<csv file="{@global.scriptsdir}/modules/lib/SugarInit_Lib.csv" var="user">
		<browser url="{@global.url}" />

		<link text="Log Out" required="false" timeout="2" />
		<browser assert="Please enter your user name and password" />

		<textfield id="user_name" set="{@user.last_name}" />
		<textfield id="user_password" set="{@user.pass}" />
		<button id="login_button" />

		<browser assert="/Welcome(, | to Sugar!)/" />
	</csv>
	
	<link id="moduleTab_Reports" />
	
	<link text="Create Report" />
	
	<wait timeout="3" />
	
	<javascript addUtils="true">
			SUGAR.reports.selectReportType('summation');
	</javascript>
	
	<wait timeout="3" />
	
	<table id="Accounts">
		<link text="Accounts" />
	</table>
	
	<javascript addUtils="true">
		SUGAR.reports.populateFieldGrid('Accounts','','');
		SUGAR.reports.showWizardStep(0);
	</javascript>
	
	<div text="Name" click="true" />
	
	
	<!-- step through the "next" buttons of report generation,
		then "back" to capture "Count" field... -->
	<javascript addUtils="true">
		SUGAR.reports.showWizardStep(0);
		SUGAR.reports.showWizardStep(0);
		SUGAR.reports.showWizardStep(1);
	</javascript>
	
	<div text="Count" click="true" />
	
	<javascript addUtils="true">
		SUGAR.reports.showWizardStep(0);
	</javascript>	
	
	<select id="chart_type" set="Horizontal Bar" />
	
	<javascript addUtils="true">
		SUGAR.reports.showWizardStep(0);
	</javascript>
	
	<timestamp />
	
	<var var="report_name" set="QA_Created_Report_{@stamp}" />
	
	<!-- hack to enable field validation to work -->
	
	<textfield name="save_report_as" set="{@report_name}" />
	<textfield id="team_name_collection_0" set="Global" 
		jscriptevent="onkeydown" />
	<textfield id="team_name_collection_0" jscriptevent="onkeyup" 
		click="false" />
	<wait timeout="2" />
	
	<javascript addUtils="true">
		SUGAR.reports.saveReport();
	</javascript>
	
	<wait timeout="2" />
	
	<link id="moduleTab_Home" />
	<link id="add_dashlets" />
	<link id="chartCategoryAnchor" />
	
	<javascript addUtils="true">
		SUGAR.mySugar.collapseReportList('myTeam');
	</javascript>

	<browser assert="{@report_name}" />
	<link text="{@report_name}" />
	
	<!-- clean up -->
	
	<div class="dashletToolSet" index="1">
		<link index="3" alert="true" />
	</div>

	<script file="{@global.scriptsdir}/modules/lib/Report_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/login.xml" />
	
	<puts text="Test: Reports_1771.xml finished." />
</soda>
	